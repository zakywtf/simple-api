extends ../layouts/base

block content
	.container-fluid
		br
		//- br
		.card
			.card-body
				.row 
					.col-lg-10 
						h5.card-title.fw-semibold.mb-4 List Mesin Kesehatan
						p.mb-0 Berikut list mesin kesehatan anda
					.col-lg-2
						a.button.btn.btn-primary.btn-round.ml-auto(title='', data-original-title="Tambah Mesin", data-toggle='modal', href='', data-target='#create')
							i.fa.fa-plus
							| 
							| Tambah Mesin
				br
				.table-responsive
					table#dataTable.table.table-bordered
						thead.thead-light
							tr
								th ID
								th Nama
								th Penempatan
								th Kondisi
								th Aksi

						tbody
							tr
								td 1234567890
								td Mark 1
								td SMP Test Aja
								td.border-bottom-0
									.d-flex.align-items-center.gap-2
										span.badge.bg-success.rounded-3.fw-semibold Baik
								td
									button.btn.btn-lg.btn-outline-dark.dropdown-toggle(data-toggle="dropdown", href="#", aria-expanded="false")
										| Aksi
									ul.dropdown-menu
										li
											a.dropdown-item(href='/web/v1/projects/detail?_id=87654321') Detail
										.dropdown-divider
										li
											a.dropdown-item(href='/web/v1/projects/detail?_id=87654321') Edit
											
										li 
											a.dropdown-item(href="/web/v1/projects/task?_id=87654321") Delete
							tr
								td 1234567890
								td Mark 1
								td SMP Test Aja
								td.border-bottom-0
									.d-flex.align-items-center.gap-2
										span.badge.bg-success.rounded-3.fw-semibold Baik
								td
									button.btn.btn-lg.btn-outline-dark.dropdown-toggle(data-toggle="dropdown", href="#", aria-expanded="false")
										| Aksi
									ul.dropdown-menu
										li
											a.dropdown-item(href='/web/v1/projects/detail?_id=87654321') Detail
										.dropdown-divider
										li
											a.dropdown-item(href='/web/v1/projects/detail?_id=87654321') Edit
											
										li 
											a.dropdown-item(href="/web/v1/projects/task?_id=87654321") Delete
							tr
								td 1234567890
								td Mark 1
								td SMP Test Aja
								td.border-bottom-0
									.d-flex.align-items-center.gap-2
										span.badge.bg-danger.rounded-3.fw-semibold Rusak
								td
									button.btn.btn-lg.btn-outline-dark.dropdown-toggle(data-toggle="dropdown", href="#", aria-expanded="false")
										| Aksi
									ul.dropdown-menu
										li
											a.dropdown-item(href='/web/v1/projects/detail?_id=87654321') Detail
										.dropdown-divider
										li
											a.dropdown-item(href='/web/v1/projects/detail?_id=87654321') Edit
											
										li 
											a.dropdown-item(href="/web/v1/projects/task?_id=87654321") Delete
							tr
								td 1234567890
								td Mark 1
								td SMP Test Aja
								td.border-bottom-0
									.d-flex.align-items-center.gap-2
										span.badge.bg-danger.rounded-3.fw-semibold Rusak
								td
									button.btn.btn-lg.btn-outline-dark.dropdown-toggle(data-toggle="dropdown", href="#", aria-expanded="false")
										| Aksi
									ul.dropdown-menu
										li
											a.dropdown-item(href='/web/v1/projects/detail?_id=87654321') Detail
										.dropdown-divider
										li
											a.dropdown-item(href='/web/v1/projects/detail?_id=87654321') Edit
											
										li 
											a.dropdown-item(href="/web/v1/projects/task?_id=87654321") Delete
							tr
								td 1234567890
								td Mark 1
								td SMP Test Aja
								td.border-bottom-0
									.d-flex.align-items-center.gap-2
										span.badge.bg-success.rounded-3.fw-semibold Baik
								td
									button.btn.btn-lg.btn-outline-dark.dropdown-toggle(data-toggle="dropdown", href="#", aria-expanded="false")
										| Aksi
									ul.dropdown-menu
										li
											a.dropdown-item(href='/web/v1/projects/detail?_id=87654321') Detail
										.dropdown-divider
										li
											a.dropdown-item(href='/web/v1/projects/detail?_id=87654321') Edit
											
										li 
											a.dropdown-item(href="/web/v1/projects/task?_id=87654321") Delete
							
							
					nav
						ul#pagination.pagination

	.modal.fade(id='create',tabindex='-1', role='dialog', aria-labelledby='myModalLabel', aria-hidden='true')
		.modal-dialog(style="width: 800px;")
			.modal-content
				.modal-header
					h2
						b Tambah Mesin
					//- button.close(type="button", data-dismiss="modal")
					//- 	span(aria-hidden="true")
					//- 		i.ti.ti-square-x
					//- 	span.sr-only close
				.modal-body
					form.form-validation(role="form", action='/web/v1/positions/insert', enctype='multipart/form-data', method='post', accept=".jpg, .jpeg, .png")
						.form-group.row
							label.col-sm-4.form-control-label(for="inputEmail3") ID
								span.text-danger *
							.col-sm-8
								input#inputEmail3.form-control(type="text", required, placeholder="Code", name="code")
						br
						.form-group.row
							label.col-sm-4.form-control-label(for="hori-pass1") Nama
								span.text-danger *
							.col-sm-8
								input#hori-pass1.form-control(type="text", placeholder="Name", required, name="name")
						br
						.form-group.row
							label.col-sm-4.form-control-label(for="hori-pass1") Penempatan
								span.text-danger *
							.col-sm-8
								select.form-control(name="devision", id='', required="required")
									option(value='') -- Pilih Sekolah --
									option(value="Data Analyst") Data Analyst
									option(value="Drone Operator") Drone Operator
									option(value="Field Operator") Field Operator
									option(value="Finance") Finance
									option(value="Hardware") Hardware
									option(value="Human Resource Development") Human Resource Development
									option(value="Manufacture") Manufacture
									option(value="Marketing") Marketing
									option(value="Project Manager") Project Manager
									option(value="Software") Software
									option(value="Surveyor") Surveyor
						br
						.form-group.row
							.col-sm-12.col-sm-offset-4
								button.btn.btn-primary.waves-effect.waves-light.float-right(type="submit")
									| Submit

	script(src="https://code.jquery.com/jquery-3.5.1.min.js")
	script(src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js")
	script.
		let currentPage = 1;
		const rowsPerPage = 10;

		function displayTable(page) {
			const rows = $('#dataTable tbody tr');
			const totalRows = rows.length;
			const totalPages = Math.ceil(totalRows / rowsPerPage);
			const start = (page - 1) * rowsPerPage;
			const end = start + rowsPerPage;

			rows.hide().slice(start, end).show();
			updatePagination(totalPages);
		}

		function updatePagination(totalPages) {
			const pagination = $('#pagination');
			pagination.empty();

			const prevButton = $('<li class="page-item"><a class="page-link" href="#">Previous</a></li>');
			if (currentPage === 1) prevButton.addClass('disabled');
			prevButton.click(function () {
				if (currentPage > 1) {
					currentPage--;
					displayTable(currentPage);
				}
			});
			pagination.append(prevButton);

			for (let i = 1; i <= totalPages; i++) {
				const pageButton = $('<li class="page-item"><a class="page-link" href="#">' + i + '</a></li>');
				if (currentPage === i) pageButton.addClass('active');
				pageButton.click(function () {
					currentPage = i;
					displayTable(currentPage);
				});
				pagination.append(pageButton);
			}

			const nextButton = $('<li class="page-item"><a class="page-link" href="#">Next</a></li>');
			if (currentPage === totalPages) nextButton.addClass('disabled');
			nextButton.click(function () {
				if (currentPage < totalPages) {
					currentPage++;
					displayTable(currentPage);
				}
			});
			pagination.append(nextButton);
		}

		function filterTable() {
			const filter = $('#search').val().toLowerCase();
			const filteredRows = $('#dataTable tbody tr').filter(function () {
				return $(this).text().toLowerCase().includes(filter);
			});

			$('#dataTable tbody').empty().append(filteredRows);

			currentPage = 1; // Reset to first page
			displayTable(currentPage);
		}

		$(document).ready(function () {
			displayTable(currentPage);
		});
